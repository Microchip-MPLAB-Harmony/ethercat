<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Slave Stack Code Generation | EtherCAT Library and Applications</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Slave Stack Code Generation" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 EtherCAT package" /> <meta property="og:description" content="Harmony 3 EtherCAT package" /> <link rel="canonical" href="../../apps/docs/readme_ssctool.html" /> <meta property="og:url" content="../../apps/docs/readme_ssctool.html" /> <meta property="og:site_name" content="EtherCAT Library and Applications" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"Slave Stack Code Generation","url":"../../apps/docs/readme_ssctool.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"description":"Harmony 3 EtherCAT package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../" class="nav-list-link">EtherCAT Library and Applications</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../driver/readme.html" class="nav-list-link">EtherCAT LAN925x Library</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../driver/docs/readme_drvlan9252.html" class="nav-list-link">EtherCAT LAN9252 Library</a> </li><li class="nav-list-item "> <a href="../../driver/docs/readme_drvlan9253.html" class="nav-list-link">EtherCAT LAN9253 Library</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../apps/ethercat_counter_foe_app/readme.html" class="nav-list-link">EtherCAT Counter FoE Application</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../apps/ethercat_counter_foe_app/docs/readme_lan9252_samd51.html" class="nav-list-link">EVB LAN9252 SAMD51 Application</a> </li><li class="nav-list-item "> <a href="../../apps/ethercat_counter_foe_app/docs/readme_lan9253_samd51.html" class="nav-list-link">EVB LAN9253 SAMD51 Application</a> </li></ul></li><li class="nav-list-item active"><a href="../../apps/docs/readme_ssctool.html" class="nav-list-link active">Slave Stack Code Generation</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search EtherCAT Library and Applications" aria-label="Search EtherCAT Library and Applications" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../index.html">EtherCAT Library and Applications</a></li> <li class="breadcrumb-nav-list-item"><span>Slave Stack Code Generation</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="slave-stack-code-generation"> <a href="#slave-stack-code-generation" aria-labelledby="slave-stack-code-generation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Slave Stack Code Generation</strong> </h1> <ol> <li> <p>Download the Slave Stack Code (SSC) Tool from EtherCAT.org website. An EtherCAT membership is necessary to download the code. The following link can be used to download the tool.</p> <p><a href="https://www.ethercat.org/en/downloads/downloads_01DCC32A10294F2EA866F7E46FB0285F.htm">EtherCAT Slave Stack Code (SSC) v5.12</a></p> </li> <li>Install the SSC Tool on the control/management PC</li> <li>Open the SSC Tool and navigate to File =&gt; New to create a New Project</li> <li> <p>Select Custom and then click Import</p> <p><img src="../../apps/docs/images/ssc_import_configuration_file.png" alt="SSC Tool" /></p> </li> <li> <p>For <strong>Lan9252 Slave</strong> device Import “Microchip-SAMD51-LAN9252-SSC_Config.xml” configuration file from <strong>&lt; Harmony Directory &gt;/ethercat/apps/ethercat_counter_foe_app/firmware/src/slave_stack/lan9252/</strong>. For <strong>Lan9253 Slave</strong> device, there are different SSC configuration files are present at <strong>&lt; Harmony Directory &gt;/ethercat/apps/ethercat_counter_foe_app/firmware/src/slave_stack/lan9253/</strong> , please find the below table for the avavilable configuration file LAN9253 device -</p> <div class="table-wrapper"><table> <thead> <tr> <th>SSC Configuration file</th> <th style="text-align: center">Mode</th> <th style="text-align: center">Supported or Not Supported</th> </tr> </thead> <tbody> <tr> <td>Microchip-SAMD51-EtherCAT-Slave_SSC_Config_SPI_Indirect_mode.xml</td> <td style="text-align: center">SPI Indirect mode</td> <td style="text-align: center">Supported</td> </tr> <tr> <td>Microchip-SAMD51-EtherCAT-Slave_SSC_Config_SPI_Direct_mode.xml</td> <td style="text-align: center">SPI Direct mode</td> <td style="text-align: center">Supported</td> </tr> <tr> <td>Microchip-SAMD51-EtherCAT-Slave_SSC_Config_SPI_Beckhoff_mode.xml</td> <td style="text-align: center">SPI Beckhoff mode</td> <td style="text-align: center">Supported</td> </tr> </tbody> </table></div> <p>After importing this configuration file, the <strong>Microchip - EtherCAT Slave Controller &lt; Microchip &gt;</strong> will appear in the custom field.</p> <p><img src="../../apps/docs/images/custom_sscfile_selected.png" alt="SSC Tool" /></p> <p>Select this and click OK. Click Yes to the next two prompts</p> <p><img src="../../apps/docs/images/ssc_import_configuration_file_2.png" alt="SSC Tool" /></p> </li> <li> <p>The driver <strong>drv_lan9252.c</strong> is required for Lan9252 slave configuration and to select file , Click <strong>yes</strong>. In the SSC tool navigate to the <strong>&lt; Harmony Directory &gt;/ethercat/apps/ethercat_counter_foe_app/firmware/src/config/sam_d51_lan9252_evb/driver/lan9252</strong> directory to point to the <strong>drv_lan9252.c</strong> file and click Open. This will load the code.</p> <p><img src="../../apps/docs/images/drv_lan9252_selection.png" alt="SSC Tool" /></p> <p><strong>NOTE</strong> - For <strong>Lan9253 Slave</strong> configuration file, one need to select drv_lan9253.c file from the <strong>driver/lan9253/src/drv_lan9253.c</strong> and remaining steps are similar to lan9252 steps.</p> </li> <li> <p>Click on <strong>Tools=&gt;Application=&gt;Import</strong> and select <strong>sample_app.xlsx</strong> application file from the path <strong>&lt; Harmony Directory &gt;/ethercat/apps/ethercat_counter_foe_app/firmware/src/slave_stack</strong> . Click OK to the next prompt</p> <p><img src="../../apps/docs/images/ssc_import_configuration_file_3.png" alt="SSC Tool" /></p> </li> <li>Click on <strong>Tools=&gt;Create New Slave Files</strong>. When prompted to save the project, save the project in the directory provided with name <strong>SAMD51_EtherCAT_Slave.esp</strong>. <ul> <li> <p>Click the Project drop-down menu in the tool bar and select Create New Slave Files. The pop-up windows open the newly slave file project ( SAMD51_EtherCAT_Slave.esp ),</p> <p><img src="../../apps/docs/images/ssc_import_configuration_file_4.png" alt="SSC Tool" /></p> </li> <li> <p>Click the Start button to create a new project file, <strong>Src</strong> folder, and <strong>ESI</strong> file (Slave Information file) in the desired directory path.</p> </li> <li> <p>A pop-up window will indicate that the files have been successfully created. Click OK to continue.</p> </li> <li> <p>Along with generated new slave files, ESI file (.xml file) also will be generated. This ESI file will have information about new Vendor ID and object configuration. This ESI file will be used by the <strong>TwinCAT Manager</strong> and is used to be programmed using “EEPROM Programming”.</p> </li> </ul> <p><strong>NOTE</strong> - <strong>EEPROM Programming</strong> is described in <strong>Running the demo application</strong> section</p> </li> <li>Browse to the directory where the new files were created, as shown in the example: <ul> <li>Src (Folder): This folder contains the Beckhoff Slave Stack code.</li> <li>SAMD51_EtherCAT_Slave (ESP): This is the SSC Tool project file.</li> <li>SAMD51_EtherCAT_Slave (XML): This is the EtherCAT® slave information file that must be used as an input to the EtherCAT master tool to configure EtherCAT® slave controllers.</li> </ul> </li> <li>The generated sample_app.c , does not have the counter, trigger configuration details and FoE read/write operations. So, the present <strong>sample_app.c, sample_app.h, sample_appObject.h</strong> can be updated from the location <strong>&lt; Harmony Directory &gt;/ethercat/apps/ethercat_counter_foe_app/firmware/src/slave_stack</strong>.</li> </ol> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2020 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
