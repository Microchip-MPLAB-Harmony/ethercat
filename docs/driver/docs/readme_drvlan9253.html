<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>EtherCAT LAN9253 Library - EtherCAT Library and Applications</title> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-2724382-16"); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>EtherCAT LAN9253 Library | EtherCAT Library and Applications</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="EtherCAT LAN9253 Library" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 EtherCAT package" /> <meta property="og:description" content="Harmony 3 EtherCAT package" /> <link rel="canonical" href="../../driver/docs/readme_drvlan9253.html" /> <meta property="og:url" content="../../driver/docs/readme_drvlan9253.html" /> <meta property="og:site_name" content="EtherCAT Library and Applications" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"EtherCAT LAN9253 Library","url":"../../driver/docs/readme_drvlan9253.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"description":"Harmony 3 EtherCAT package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="../../mplab_harmony_license.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="../../release_notes.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="../../index.html" class="navigation-list-link">EtherCAT Library and Applications</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="../../driver/readme.html" class="navigation-list-link">EtherCAT LAN925x Library</a><ul class="navigation-list-child-list"><li class="navigation-list-item active"> <a href="../../driver/docs/readme_drvlan9253.html" class="navigation-list-link active">EtherCAT LAN9253 Library</a> </li></ul></li><li class="navigation-list-item "><a href="../../apps/ethercat_counter_foe_app/readme.html" class="navigation-list-link">EtherCAT Counter FoE Application</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="../../apps/ethercat_counter_foe_app/docs/readme_lan9252_samd51.html" class="navigation-list-link">EVB LAN9252 SAMD51 Application</a> </li><li class="navigation-list-item "> <a href="../../apps/ethercat_counter_foe_app/docs/readme_lan9253_samd51.html" class="navigation-list-link">EVB LAN9253 SAMD51 Application</a> </li></ul></li><li class="navigation-list-item "><a href="../../apps/docs/readme_ssctool.html" class="navigation-list-link">Slave Stack Code Generation</a></li></ul></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search EtherCAT Library and Applications" aria-label="Search EtherCAT Library and Applications" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="https://support.microchip.com">Obtain Support from Microchip</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../release_notes.html">EtherCAT LAN925x Library</a></li> <li class="breadcrumb-nav-list-item"><span>EtherCAT LAN9253 Library</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="Microchip logo" /></a> <img src="https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_mplab_harmony_logo_small.png" alt="Harmony logo small" /></p> <h1 id="ethercat-lan9253-library"> <a href="#ethercat-lan9253-library" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> EtherCAT LAN9253 Library </h1> <p>Ethernet for Control Automation Technology (EtherCAT) was developed by Beckhoff. EtherCAT is a fast and deterministic network, and processes data using dedicated hardware and software. It uses a full duplex, master-slave configuration.</p> <p>The LAN9253 is a 2/3-port EtherCAT slave controller with dual integrated Ethernet PHYs which each contain a fullduplex 100BASE-TX transceiver and support 100Mbps (100BASE-TX) operation.</p> <p>EtherCAT Slave Controller Interface layer is designed for Microchip MCUs to communicate with LAN9253 EtherCAT Slave controller. This EtherCAT framework is configured with the communication interfaces (QSPI (SPI mode), GPIO). This communication Interface layer which will acts like bridge between EtherCAT Slave Stack Code (SSC) and Host peripherals to communicate with LAN9253. SSC Stack (generated from standard SSC tool) have feature to transfer the File over EtherCAT (FoE) for MCU firmware upgrade from TwinCAT tool.</p> <p><img src="images/EtherCAT_module_lan9253_diagram.png" alt="Ethercat Technology" /></p> <h2 id="fatures-supported"> <a href="#fatures-supported" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Fatures Supported </h2> <ul> <li>This library supports LAN 9253 slave device</li> <li>This library useful to the different 32 bit Microcontroller device</li> <li>LAN9253 doesnâ€™t support Run LED. So this feature has to be enabled by PDI SOC if it is needed. LAN9253 supports <strong>Error LED</strong>. EVB-LAN9253-SAMD51 supports ERROR LED indicator. For ELD status <strong>ON</strong> - <ul> <li>Indicates EEPROM loading error</li> <li>Indicates the failure EtherCAT slave connectivity link</li> <li>Application Layer Event (AL Event) error indication</li> <li>EtherCAT State mode transition error indication</li> </ul> </li> <li> <p>Driver supports SPI Indirect, SPI Direct and Beckhoff SPI mode of Process Data Interface(PDI) selection.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: center">Process Data Interface Mode</th> <th style="text-align: center">EEPROM Source Data Config</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">SPI Indirect Mode</td> <td style="text-align: center">0x80</td> </tr> <tr> <td style="text-align: center">SPI Direct Mode</td> <td style="text-align: center">0x82</td> </tr> <tr> <td style="text-align: center">SPI Beckhoff Mode</td> <td style="text-align: center">0x05</td> </tr> </tbody> </table></div> <p>These above EEPROM Source Data config data is provided to the <strong>ESC CONFIG DATA</strong> of the <br /> <strong>Microchip-SAMD51-EtherCAT-Slave_SSC_Config_SPI_XXX_mode.xml</strong> file.</p> </li> <li> <p><strong>FoE (File Over EtherCAT)</strong> can be used to download and upload a file to an EtherCAT device. Bank Switch algorithm is used to switch the new firmware downloaded.</p> </li> <li> <p>The SPI Slave module provides a low pin count synchronous slave interface that facilitates communication between the device and a host system. The SPI Slave allows access to the System CSRs and internal FIFOs and memories.</p> <p>The following is an overview of the functions provided by the SPI/SQI Slave:</p> <ul> <li> <p>Serial Read: 4-wire (clock, select, data in and data out) reads at up to 30 MHz Serial command, address and data. Single and multiple register reads with incrementing, decrementing or static addressing.</p> </li> <li> <p>Fast Read: 4-wire (clock, select, data in and data out) reads at up to 50 MHz Serial command, address and data. Dummy Byte(s) for first access. Single and multiple register reads with incrementing, decrementing or static addressing.</p> </li> </ul> </li> <li>The Beckhoff Slave Stack Code supports different modes of synchronization which are based on three physical signals: (PDI_)IRQ, Sync0 and Sync1.Both SM-Synchron and Distributed Clocks (DC) synchronization are supported.</li> </ul> <h2 id="lan-9253-firmware-overview"> <a href="#lan-9253-firmware-overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> LAN 9253 Firmware Overview </h2> <ul> <li>drv_lan9253_ecat_util.c and drv_lan9253_ecat_util.h files are interfaced to Lan 9253 driver.</li> </ul> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: center">Name</th> <th style="text-align: center">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">MCHP_ESF_PDI_INIT</td> <td style="text-align: center">Initialize the hardware interface (SPI) used to communicate with Slave Controller</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_IS_PDI_FUNCTIONAL</td> <td style="text-align: center">Verifies the hardware interface (SPI) is functional or not</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_PDI_WRITE</td> <td style="text-align: center">Initiates a write transfer to Slave Controller via selected PDI</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_PDI_READ</td> <td style="text-align: center">Initiates a read transfer to Slave Controller via selected PDI</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_PDI_FASTREAD</td> <td style="text-align: center">Initiates a fast-read transfer to Slave Controller via selected PDI</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_PDI_READ_PDRAM</td> <td style="text-align: center">Initiates a read process data RAM transfer to Slave Controller via selected PDI</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_PDI_FASTREAD_PDRAM</td> <td style="text-align: center">Initiates a fast-read process data RAM transfer to Slave Controller via selected PDI</td> </tr> <tr> <td style="text-align: center">MCHP_ESF_PDI_WRITE_PDRAM</td> <td style="text-align: center">Initiates a write process data RAM transfer to Slave Controller via selected PDI</td> </tr> </tbody> </table></div> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2020 Microchip Technology.</p> </footer> </div> </div> </div> </div> </body> </html>
